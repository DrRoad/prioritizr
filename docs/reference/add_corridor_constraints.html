<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add corridor constraints — add_corridor_constraints â€¢ prioritizr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add corridor constraints</h1>
    </div>

    
    <p>It is important to maintain connectivity throughout a reserve network.
However, some areas are more difficult for species to traverse then other
areas. As a consequence, even though a reserve may protect a contiguous
section of land, some species may not be able to disperse throughout
the network if some of the land is a high barrier to dispersal. This
function adds constraints to ensure that all planning units used to
represent features in the conservation problem are connected by planning
units that have high connectivity.</p>
    

    <pre class="usage"><span class='fu'>add_corridor_constraints</span>(<span class='no'>x</span>, <span class='no'>connectivities</span>, <span class='no'>thresholds</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p></td>
    </tr>
    <tr>
      <th>connectivities</th>
      <td><p><code>object</code> used to calculate the the connectivity
between planning units. See the Details section for more information.</p></td>
    </tr>
    <tr>
      <th>thresholds</th>
      <td><p><code>numeric</code> value representing the minimum
connectivity required between planning units for them to be
considered connected for a given feature. Threshold values
are expressed as a proportion of the total range of connectivity
observed among all planning units for each feature. If a higher
threshold is used, then planning units with lower conductances,
and in turn, lower connectivity will not be considered
to have strong enough connectivity to form corridors to link
planning units. If <code>thresholds</code> is a single number then it is used
as the threshold for each feature. Otherwise, if <code>threshold</code> is a
<code>vector</code> then it specifies the threshold for each feature.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments passed to <code><a href='fast_extract.html'>fast_extract</a></code> if
the planning units in argument to <code>x</code> inherit from a
<code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>RasterStack-class</a></code> object.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function adds constraints to a conservation planning problem to ensure
  that all planning units used to represent a given feature are connected to
  each other. To achieve this, each planning unit is associated with
  conductance values that describe the ease at which individuals from
  each feature can disperse through it. Higher conductance values indicate
  that individuals can move planning units with greater ease. The
  connectivity between two planning units is calculated as the average
  conductance of the two planning units. After the connectivity values have
  been calculated, the threshold is applied to determine which planning
  units are "connected enough" to be used for linking planning units
  occupied by conspecifics. <strong>Adding these constraints to a problem
  will dramatically increase the amount of time required to solve it.</strong></p>
<p>The argument to <code>y</code> can be used to specify the
  the connectivity between different planning units in several different
  ways:</p><dl class='dl-horizontal'>
   <dt><code>character</code> <code>vector</code></dt><dd><p>If the planning units in
     argument to <code>x</code> inherit from a <code><a href='http://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code>
     object then the argument to codey can refer to the
     names of the columns in the attribute table that contain the
     conductance values for each planning unit for each feature.
     It is assumed that the order of the column names in argument to
     <code>y</code> matches the order of the features in the
     argument to <code>x</code>.</p></dd>
    <dt><code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>RasterStack-class</a></code> object</dt><dd><p>Each band
     corresponds
     to each feature in the argument to <code>x</code>. The cells in each band
     denote the conductance of an area. For a given feature, the
     conductance of each planning unit is calculated by overlaying the
     planning units in argument to codex with the raster data in
     argument to <code>conductance</code>. Note that
     if the planning units in argument to <code>x</code> inherit from a
     <code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>Raster-class</a></code> object, then the argument to
     codeconductance must have the same spatial properties as the
     planning units (ie. coordinate system, extent, resolution).</p></dd>
    <dt><code>list</code> of <code><a href='http://www.rdocumentation.org/packages/Matrix/topics/dsCMatrix-class'>dsCMatrix-class</a></code> matrices</dt><dd><p>Each element in the list corresponds to a different feature. Each
     row and column refers to a different planning unit, and the cell
     values denote the connectivity between the two planning units. Note
     that the connectivity between planning units is assumed to be
     symmetric.</p></dd>
 </dl>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='constraints.html'>constraints</a></code>, <code><a href='penalties.html'>penalties</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load data</span>
<span class='fu'>data</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>)

<span class='co'># create a basic problem</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.1</span>)

<span class='co'># create problem with added corridor constraints to ensure that</span>
<span class='co'># planning units used to represent features are connected by</span>
<span class='co'># planning units with habitat that is suitable for that feature</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_corridor_constraints</span>(<span class='no'>sim_features</span>, <span class='fl'>0.5</span>)


<span class='co'># solve problems</span>
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'>stack</span>(<span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>))</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [3e+00, 7e+00]
#&gt; Found heuristic solution: objective 2145.27
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.726522e+03, 11 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 1726.52215    0    4 2145.26789 1726.52215  19.5%     -    0s
#&gt; H    0     0                    1792.7738341 1726.52215  3.70%     -    0s
#&gt; 
#&gt; Explored 0 nodes (11 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 1792.77 2145.27 
#&gt; Pool objective bound 1726.52
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.792773834063e+03, best bound 1.726522151579e+03, gap 3.6955%
#&gt; Optimize a model with 1172 rows, 982 columns and 3838 nonzeros
#&gt; Variable types: 0 continuous, 982 integer (982 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 7e+00]
#&gt; Presolve time: 0.04s
#&gt; Presolved: 1172 rows, 982 columns, 3838 nonzeros
#&gt; Variable types: 0 continuous, 982 integer (982 binary)
#&gt; Presolved: 1172 rows, 982 columns, 3838 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 2.048985e+03, 1544 iterations, 0.13 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 2048.98539    0  347          - 2048.98539      -     -    0s
#&gt;      0     0 2106.67934    0  486          - 2106.67934      -     -    0s
#&gt;      0     0 2120.75038    0  582          - 2120.75038      -     -    0s
#&gt;      0     0 2130.54568    0  541          - 2130.54568      -     -    1s
#&gt;      0     0 2131.62586    0  551          - 2131.62586      -     -    1s
#&gt;      0     0 2133.94525    0  522          - 2133.94525      -     -    1s
#&gt;      0     0 2134.09598    0  547          - 2134.09598      -     -    1s
#&gt;      0     0 2137.22449    0  509          - 2137.22449      -     -    2s
#&gt;      0     0 2137.75668    0  519          - 2137.75668      -     -    2s
#&gt;      0     0 2137.75668    0  521          - 2137.75668      -     -    2s
#&gt;      0     0 2137.75668    0  505          - 2137.75668      -     -    2s
#&gt; H    0     0                    7535.2184413 2137.75668  71.6%     -    3s
#&gt; H    0     0                    3903.3646943 2137.75668  45.2%     -    3s
#&gt;      0     2 2137.81804    0  505 3903.36469 2137.81804  45.2%     -    3s
#&gt; *   50    30              35    3545.3018130 2138.41330  39.7%  78.1    4s
#&gt;     74    49 2997.87577   16   94 3545.30181 2165.09794  38.9%  91.7    5s
#&gt; H   83    56                    3505.3533093 2165.09794  38.2%  84.4    5s
#&gt; *   90    50              28    3275.1765272 2165.09794  33.9%  78.9    5s
#&gt; H  143    60                    2697.8459424 2199.56738  18.5%  80.3    6s
#&gt; H  145    60                    2695.9813390 2199.56738  18.4%  79.5    6s
#&gt; H  172    76                    2694.2993470 2204.17182  18.2%  73.0    6s
#&gt;    382   148 2630.78779   13  166 2694.29935 2271.19311  15.7%  69.2   10s
#&gt; H  443   164                    2693.9913747 2276.28434  15.5%  67.8   10s
#&gt; H  675   216                    2690.5707218 2312.39948  14.1%  66.1   14s
#&gt;    712   226 2587.14129   11  288 2690.57072 2315.76864  13.9%  66.1   15s
#&gt;    993   288 2461.84515    9  304 2690.57072 2341.92399  13.0%  65.5   20s
#&gt;   1030   296 2497.43337    9  347 2690.57072 2343.96403  12.9%  65.0   25s
#&gt; H 1031   282                    2680.8577398 2343.96403  12.6%  64.9   26s
#&gt;   1034   285 2343.96403   16  413 2680.85774 2343.96403  12.6%  67.5   30s
#&gt;   1113   315 2343.96403   35  365 2680.85774 2343.96403  12.6%  71.0   35s
#&gt;   1427   291 2531.74650   35  373 2680.85774 2343.96403  12.6%  69.6   40s
#&gt;   1683   291 2510.11429   28  150 2680.85774 2343.96403  12.6%  69.3   45s
#&gt;   2021   357 2623.15413   29  217 2680.85774 2343.96403  12.6%  67.2   50s
#&gt;   2416   468     cutoff   26      2680.85774 2343.96403  12.6%  64.7   55s
#&gt;   2892   626 2577.96990   34  423 2680.85774 2357.46031  12.1%  61.7   60s
#&gt;   3511   820 2629.08586   29  157 2680.85774 2377.60888  11.3%  57.8   65s
#&gt;   3966   932 2576.43613   45   50 2680.85774 2396.50757  10.6%  56.2   70s
#&gt;   4438  1015 2655.50040   30  144 2680.85774 2406.66246  10.2%  55.3   75s
#&gt; 
#&gt; Explored 4700 nodes (258754 simplex iterations) in 77.45 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 10: 2680.86 2690.57 2693.99 ... 3903.36
#&gt; Pool objective bound 2414.06
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 2.680857739841e+03, best bound 2.414062940516e+03, gap 9.9518%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'>plot</span>(<span class='no'>s</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"basic solution"</span>, <span class='st'>"solution with corridors"</span>))</div><img src='add_corridor_constraints-4.png' alt='' width='540' height='400' /><div class='input'>


</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://arcese.forestry.ubc.ca.people/richard-schuster/'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='http://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
