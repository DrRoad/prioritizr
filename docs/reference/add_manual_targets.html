<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add manual targets — add_manual_targets • prioritizr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>



<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Add manual targets — add_manual_targets" />

<meta property="og:description" content="Set targets for a conservation planning problem by manually
specifying all the required information for each target. This function
is useful because it can be used to customize all aspects of a target. For
most cases, targets can be specified using the
link{add_absolute_targets} and add_relative_targets
functions. However, this function can be used to (i) mix absolute and
relative targets for different features and zones, (ii) set targets that
pertain to the allocations of planning units in multiple zones, and (iii)
set targets that require different senses (e.g. targets which specify the
solution should not exceed a certain quantity using "&lt;=" values)." />

<meta property="og:image" content="http://prioritizr.github.io/prioritizr/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioritizr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">4.0.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/gurobi_installation.html">Gurobi Installation Guide</a>
    </li>
    <li>
      <a href="../articles/publication_record.html">Publication Record</a>
    </li>
    <li>
      <a href="../articles/zones.html">Management Zones</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add manual targets</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/prioritizr/blob/master/R/add_manual_targets.R'><code>R/add_manual_targets.R</code></a></small>
    <div class="hidden name"><code>add_manual_targets.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Set targets for a conservation planning <code>problem</code> by manually
specifying all the required information for each target. This function
is useful because it can be used to customize all aspects of a target. For
most cases, targets can be specified using the
<code>link{add_absolute_targets}</code> and <code>add_relative_targets</code>
functions. However, this function can be used to (i) mix absolute and
relative targets for different features and zones, (ii) set targets that
pertain to the allocations of planning units in multiple zones, and (iii)
set targets that require different senses (e.g. targets which specify the
solution should not exceed a certain quantity using <code>"&lt;="</code> values).</p>
    
    </div>

    <pre class="usage"><span class='co'># S4 method for ConservationProblem,data.frame</span>
<span class='fu'>add_manual_targets</span>(<span class='no'>x</span>, <span class='no'>targets</span>)

<span class='co'># S4 method for ConservationProblem,tbl_df</span>
<span class='fu'>add_manual_targets</span>(<span class='no'>x</span>, <span class='no'>targets</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p></td>
    </tr>
    <tr>
      <th>targets</th>
      <td><p><code>data.frame</code> or <code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code> object. See
the Details section for more information.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object with the targets added
  to it.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Targets are used to specify the minimum amount or proportion of a
  feature's distribution that needs to be protected. Most conservation
  planning problems require targets with the exception of the maximum cover
  (see <code>add_max_cover_objective</code>) and maximum utility
  (see <code>add_max_utility_objective</code>) problems. Attempting to solve
  problems with objectives that require targets without specifying targets
  will throw an error.</p>
<p>The <code>targets</code> argument should contain the following fields (columns):</p>
<p></p><dl class='dl-horizontal'>
    <dt><code>"feature"</code></dt><dd><p><code>character</code> name of features in argument
    to <code>x</code>.</p></dd>
    <dt><code>"zone"</code></dt><dd><p><code>character</code> name of zones in argument to
    <code>x</code>. This field (column) is optional for arguments to <code>x</code>
    that do not contain multiple zones.</p></dd>
    <dt><code>"type"</code></dt><dd><p><code>character</code> describing the type of target.
    Acceptable values include <code>"absolute"</code> and <code>"relative"</code>.
    These values correspond to <code>add_absolute_targets</code>,
    and <code>add_relative_targets</code> respectively.</p></dd>
    <dt><code>"sense"</code></dt><dd><p><code>character</code> sense of the target. Acceptable
    values include: <code>"&gt;="</code>, <code>"&lt;="</code>, and <code>"="</code>. This field
    (column) is optional and if it is missing then target senses will
    default to <code>"&gt;="</code> values.</p></dd>
    <dt><code>"target"</code></dt><dd><p><code>numeric</code> target threshold.</p></dd>
    </dl>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='targets.html'>targets</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># set seed for reproducibility</span>
<span class='fu'>set.seed</span>(<span class='fl'>500</span>)

<span class='co'># load data</span>
<span class='fu'>data</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>, <span class='no'>sim_pu_zones_stack</span>, <span class='no'>sim_features_zones</span>)

<span class='co'># create problem with 10 % relative targets</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'>add_relative_targets</span>(<span class='fl'>0.1</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_binary_decisions</span>()</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'>solve</span>(<span class='no'>p1</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [3e+00, 8e+00]
#&gt; Found heuristic solution: objective 2337.9617505
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.924252e+03, 13 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 1924.25198    0    4 2337.96175 1924.25198  17.7%     -    0s
#&gt; H    0     0                    1979.9609382 1924.25198  2.81%     -    0s
#&gt; 
#&gt; Explored 1 nodes (13 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 1979.96 2337.96 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.979960938178e+03, best bound 1.924251977336e+03, gap 2.8136%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'>plot</span>(<span class='no'>s1</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_manual_targets-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># create equivalent problem using add_manual_targets</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'>add_manual_targets</span>(<span class='fu'>data.frame</span>(<span class='kw'>feature</span> <span class='kw'>=</span> <span class='fu'>names</span>(<span class='no'>sim_features</span>),
                                    <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"relative"</span>, <span class='kw'>sense</span> <span class='kw'>=</span> <span class='st'>"&gt;="</span>,
                                    <span class='kw'>target</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_binary_decisions</span>()</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s2</span> <span class='kw'>&lt;-</span> <span class='fu'>solve</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [3e+00, 8e+00]
#&gt; Found heuristic solution: objective 2337.9617505
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.924252e+03, 13 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 1924.25198    0    4 2337.96175 1924.25198  17.7%     -    0s
#&gt; H    0     0                    1979.9609382 1924.25198  2.81%     -    0s
#&gt; 
#&gt; Explored 1 nodes (13 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 1979.96 2337.96 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.979960938178e+03, best bound 1.924251977336e+03, gap 2.8136%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'>plot</span>(<span class='no'>s2</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_manual_targets-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># create problem with targets set for only a few features</span>
<span class='no'>p3</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'>add_manual_targets</span>(<span class='fu'>data.frame</span>(
        <span class='kw'>feature</span> <span class='kw'>=</span> <span class='fu'>names</span>(<span class='no'>sim_features</span>)[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"relative"</span>,
        <span class='kw'>sense</span> <span class='kw'>=</span> <span class='st'>"&gt;="</span>, <span class='kw'>target</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_binary_decisions</span>()</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s3</span> <span class='kw'>&lt;-</span> <span class='fu'>solve</span>(<span class='no'>p3</span>)</div><div class='output co'>#&gt; Optimize a model with 3 rows, 90 columns and 270 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [3e+00, 8e+00]
#&gt; Found heuristic solution: objective 2337.9617505
#&gt; Presolve time: 0.00s
#&gt; Presolved: 3 rows, 90 columns, 270 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 3 rows, 90 columns, 270 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.896928e+03, 7 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 1896.92837    0    3 2337.96175 1896.92837  18.9%     -    0s
#&gt; H    0     0                    1992.0020306 1896.92837  4.77%     -    0s
#&gt; 
#&gt; Explored 1 nodes (7 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 1992 2337.96 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.992002030644e+03, best bound 1.896928373110e+03, gap 4.7728%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'>plot</span>(<span class='no'>s3</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_manual_targets-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># create problem that aims to secure at least 10 % of the habitat for one</span>
<span class='co'># feature whilst ensuring that the solution does not capture more than</span>
<span class='co'># 20 units habitat for different feature</span>
<span class='co'># create problem with targets set for only a few features</span>
<span class='no'>p4</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span><span class='kw'>[[</span><span class='fl'>1</span>:<span class='fl'>2</span>]]) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'>add_manual_targets</span>(<span class='fu'>data.frame</span>(
        <span class='kw'>feature</span> <span class='kw'>=</span> <span class='fu'>names</span>(<span class='no'>sim_features</span>)[<span class='fl'>1</span>:<span class='fl'>2</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"relative"</span>,
        <span class='kw'>sense</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"&gt;="</span>, <span class='st'>"&lt;="</span>), <span class='kw'>target</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.1</span>, <span class='fl'>0.2</span>))) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_binary_decisions</span>()</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s4</span> <span class='kw'>&lt;-</span> <span class='fu'>solve</span>(<span class='no'>p4</span>)</div><div class='output co'>#&gt; Optimize a model with 2 rows, 90 columns and 180 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [6e+00, 8e+00]
#&gt; Found heuristic solution: objective 2305.4577086
#&gt; Presolve time: 0.00s
#&gt; Presolved: 2 rows, 90 columns, 180 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 2 rows, 90 columns, 180 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.789584e+03, 1 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 1789.58434    0    1 2305.45771 1789.58434  22.4%     -    0s
#&gt; H    0     0                    1936.5927321 1789.58434  7.59%     -    0s
#&gt; 
#&gt; Explored 1 nodes (1 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 1936.59 2305.46 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.936592732069e+03, best bound 1.789584338844e+03, gap 7.5911%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'>plot</span>(<span class='no'>s4</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_manual_targets-4.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># create a multi-zone problem that requires a specific amount of each</span>
<span class='co'># feature in each zone</span>
<span class='no'>targets_matrix</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>rpois</span>(<span class='fl'>15</span>, <span class='fl'>1</span>), <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>3</span>)

<span class='no'>p5</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>sim_pu_zones_stack</span>, <span class='no'>sim_features_zones</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'>add_absolute_targets</span>(<span class='no'>targets_matrix</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_binary_decisions</span>()</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s5</span> <span class='kw'>&lt;-</span> <span class='fu'>solve</span>(<span class='no'>p5</span>)</div><div class='output co'>#&gt; Optimize a model with 105 rows, 270 columns and 1620 nonzeros
#&gt; Variable types: 0 continuous, 270 integer (270 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 3e+00]
#&gt; Found heuristic solution: objective 3524.7950998
#&gt; Presolve removed 8 rows and 0 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 97 rows, 270 columns, 900 nonzeros
#&gt; Variable types: 0 continuous, 270 integer (270 binary)
#&gt; Presolved: 97 rows, 270 columns, 900 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 2.683505e+03, 9 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 2683.50476    0    4 3524.79510 2683.50476  23.9%     -    0s
#&gt; H    0     0                    3048.1089402 2683.50476  12.0%     -    0s
#&gt; H    0     0                    3004.3916133 2683.50476  10.7%     -    0s
#&gt;      0     0 2800.86480    0    6 3004.39161 2800.86480  6.77%     -    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Cover: 3
#&gt; 
#&gt; Explored 1 nodes (13 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 3004.39 3048.11 3524.8 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.004391613337e+03, best bound 2.800864801663e+03, gap 6.7743%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'>plot</span>(<span class='fu'><a href='category_layer.html'>category_layer</a></span>(<span class='no'>s5</span>), <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_manual_targets-5.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># create equivalent problem using add_manual_targets</span>
<span class='no'>targets_dataframe</span> <span class='kw'>&lt;-</span> <span class='fu'>expand.grid</span>(<span class='kw'>feature</span> <span class='kw'>=</span> <span class='fu'>feature_names</span>(<span class='no'>sim_features_zones</span>),
                                 <span class='kw'>zone</span> <span class='kw'>=</span> <span class='fu'>zone_names</span>(<span class='no'>sim_features_zones</span>),
                                 <span class='kw'>sense</span> <span class='kw'>=</span> <span class='st'>"&gt;="</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"absolute"</span>)
<span class='no'>targets_dataframe</span>$<span class='no'>target</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='no'>targets_matrix</span>)

<span class='no'>p6</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>sim_pu_zones_stack</span>, <span class='no'>sim_features_zones</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'>add_manual_targets</span>(<span class='no'>targets_dataframe</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_binary_decisions</span>()</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s6</span> <span class='kw'>&lt;-</span> <span class='fu'>solve</span>(<span class='no'>p6</span>)</div><div class='output co'>#&gt; Optimize a model with 105 rows, 270 columns and 1620 nonzeros
#&gt; Variable types: 0 continuous, 270 integer (270 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 3e+00]
#&gt; Found heuristic solution: objective 3524.7950998
#&gt; Presolve removed 8 rows and 0 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 97 rows, 270 columns, 900 nonzeros
#&gt; Variable types: 0 continuous, 270 integer (270 binary)
#&gt; Presolved: 97 rows, 270 columns, 900 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 2.683505e+03, 9 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 2683.50476    0    4 3524.79510 2683.50476  23.9%     -    0s
#&gt; H    0     0                    3048.1089402 2683.50476  12.0%     -    0s
#&gt; H    0     0                    3004.3916133 2683.50476  10.7%     -    0s
#&gt;      0     0 2800.86480    0    6 3004.39161 2800.86480  6.77%     -    0s
#&gt; 
#&gt; Cutting planes:
#&gt;   Cover: 3
#&gt; 
#&gt; Explored 1 nodes (13 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 3004.39 3048.11 3524.8 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 3.004391613337e+03, best bound 2.800864801663e+03, gap 6.7743%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'>plot</span>(<span class='fu'><a href='category_layer.html'>category_layer</a></span>(<span class='no'>s6</span>), <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_manual_targets-6.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># create a problem that requires a total of 20 units of habitat to be</span>
<span class='co'># captured for two species. This can be achieved through representing</span>
<span class='co'># habitat in two zones. The first zone represents a full restoration of the</span>
<span class='co'># habitat and a second zone represents a partial restoration of the habitat</span>
<span class='co'># Thus only half of the benefit that would have been gained from the full</span>
<span class='co'># restoration is obtained when planning units are allocated a partial</span>
<span class='co'># restoration</span>

<span class='co'># create data</span>
<span class='no'>spp_zone1</span> <span class='kw'>&lt;-</span> <span class='fu'>as.list</span>(<span class='no'>sim_features_zones</span>)<span class='kw'>[[</span><span class='fl'>1</span>]]<span class='kw'>[[</span><span class='fl'>1</span>:<span class='fl'>2</span>]]
<span class='no'>spp_zone2</span> <span class='kw'>&lt;-</span> <span class='no'>spp_zone1</span> * <span class='fl'>0.5</span>
<span class='no'>costs</span> <span class='kw'>&lt;-</span> <span class='no'>sim_pu_zones_stack</span><span class='kw'>[[</span><span class='fl'>1</span>:<span class='fl'>2</span>]]

<span class='co'># create targets</span>
<span class='no'>targets_dataframe2</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>tibble</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></span>(
  <span class='kw'>feature</span> <span class='kw'>=</span> <span class='fu'>names</span>(<span class='no'>spp_zone1</span>), <span class='kw'>zone</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='fu'>c</span>(<span class='st'>"z1"</span>, <span class='st'>"z2"</span>), <span class='fu'>c</span>(<span class='st'>"z1"</span>, <span class='st'>"z2"</span>)),
  <span class='kw'>sense</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"&gt;="</span>, <span class='st'>"&gt;="</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"absolute"</span>, <span class='st'>"absolute"</span>),
  <span class='kw'>target</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>20</span>, <span class='fl'>20</span>))

<span class='co'># create problem</span>
<span class='no'>p7</span> <span class='kw'>&lt;-</span> <span class='fu'>problem</span>(<span class='no'>costs</span>, <span class='fu'><a href='zones.html'>zones</a></span>(<span class='no'>spp_zone1</span>, <span class='no'>spp_zone2</span>,
                           <span class='kw'>feature_names</span> <span class='kw'>=</span> <span class='fu'>names</span>(<span class='no'>spp_zone1</span>),
                           <span class='kw'>zone_names</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"z1"</span>, <span class='st'>"z2"</span>))) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_min_set_objective</span>() <span class='kw'>%&gt;%</span>
      <span class='fu'>add_manual_targets</span>(<span class='no'>targets_dataframe2</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'>add_binary_decisions</span>()</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s7</span> <span class='kw'>&lt;-</span> <span class='fu'>solve</span>(<span class='no'>p7</span>)</div><div class='output co'>#&gt; Optimize a model with 92 rows, 180 columns and 540 nonzeros
#&gt; Variable types: 0 continuous, 180 integer (180 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [1e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 2e+01]
#&gt; Found heuristic solution: objective 17976.253561
#&gt; Presolve removed 35 rows and 34 columns
#&gt; Presolve time: 0.00s
#&gt; Presolved: 57 rows, 146 columns, 258 nonzeros
#&gt; Found heuristic solution: objective 15546.191616
#&gt; Variable types: 0 continuous, 146 integer (146 binary)
#&gt; Presolved: 57 rows, 146 columns, 258 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.244034e+04, 1 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 12440.3353    0    1 15546.1916 12440.3353  20.0%     -    0s
#&gt; H    0     0                    12556.355431 12440.3353  0.92%     -    0s
#&gt; 
#&gt; Explored 1 nodes (1 simplex iterations) in 0.01 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 3: 12556.4 15546.2 15997.8 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.255635543120e+04, best bound 1.244033527177e+04, gap 0.9240%</div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'>plot</span>(<span class='fu'><a href='category_layer.html'>category_layer</a></span>(<span class='no'>s7</span>), <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='add_manual_targets-7.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='http://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

