<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gurobi installation for use in prioritzr • prioritizr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Gurobi_installation.html">Gurobi installation for use in prioritzr</a>
    </li>
    <li>
      <a href="../articles/prioritizr_basics.html">Prioritizr Basics</a>
    </li>
    <li>
      <a href="../articles/quick_start.html">Prioritizr Quick Start Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Gurobi installation for use in prioritzr</h1>
                        <h4 class="author">Richard Schuster</h4>
            
            <h4 class="date">2017-10-06</h4>
          </div>

    
    
<div class="contents">
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This vignette is part of the <em>prioritizr</em> <em>R</em> package for solving systematic conservation prioritization problems using integer linear programming (ILP) techniques. The package offers a flexible interface for creating conservation problems using a range of different objectives and constraints that can be tailored to the specific needs of the conservation planner. Conservation problems can be solved using a variety of commercial and open-source exact algorithm solvers. In contrast to the algorithms conventionally used to solve conservation problems, such as greedy heuristics or simulated annealing, the ILP algorithms used by <em>prioritizr</em> are guaranteed to find optimal solutions. This package also has the functionality to read <a href="http://marxan.net/">Marxan</a> input data and find much cheaper solutions in a much shorter period of time than Marxan (<a href="http://marxan.net/downloads/papers/beyer_etal_2015.pdf">Beyer <em>et al. 2016</em></a>).</p>
<p>For a walk-through of the functions available in the prioritizr package and their usage with a simulated dataset, refer to the <a href="quick_start.html">Quickstart Guide</a>.</p>
<p>Please refer to the <a href="prioritizr_basics.html">Prioritizr Basics</a> vignette for more on the concepts behind the <em>prioritizr</em> package.</p>
</div>
<div id="the-gurobi-solver" class="section level1">
<h1 class="hasAnchor">
<a href="#the-gurobi-solver" class="anchor"></a>The Gurobi solver</h1>
<p>The currently supported solvers are listed below. Each must be installed separately from this package. The details of the solvers are intentionally abstracted away so that minimal knowledge is required to use a given solver. However, one of the following R packages must be installed before a conservation problem can be solved.</p>
<ul>
<li>
<a href="http://gurobi.com">Gurobi:</a> Install the <a href="http://www.gurobi.com/products/modeling-languages/r"><em>gurobi</em> <em>R</em> package</a> to use this solver.</li>
<li>
<a href="https://projects.coin-or.org/SYMPHONY">SYMPHONY:</a> Install either the <a href="https://CRAN.R-project.org/package=Rsymphony"><em>Rsymphony</em></a> or <a href="https://bioconductor.riken.jp/packages/3.3/bioc/html/lpsymphony.html"><em>lpsymphony</em></a> <em>R</em> packages to use this solver.</li>
</ul>
<p>Gurobi is the most powerful and fastest solver <em>prioritizr</em> supports at this point, which is why we are providing the Gurobi Optimizer installation intstructions here. A great place to start in terms of software and package installation is the Gurobi <a href="http://www.gurobi.com/documentation/">documentation</a></p>
<div id="gurobi-requires-a-license-to-work" class="section level2">
<h2 class="hasAnchor">
<a href="#gurobi-requires-a-license-to-work" class="anchor"></a>Gurobi requires a license to work</h2>
<p>One of the potential caveats of using Gurobi is that you will need to aquire a license in order to use the Gurobi software. If you are an academic user at a degree-granting institution you can take advantage of Gurobi’s <a href="https://user.gurobi.com/download/licenses/free-academic">Free Academic License</a>. Once you have signed up for a free account you can request a free academic licence.</p>
<div class="figure">
<img src="Free%20Academic%20License%20page.PNG">
</div>
<p>Once you accept the terms of service you can generate a license such as this one:</p>
<div class="figure">
<img src="Actual%20license.PNG">
</div>
</div>
<div id="gurobi-optimizer-software-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#gurobi-optimizer-software-installation" class="anchor"></a>Gurobi optimizer software installation</h2>
<p>The Gurobi softwre installation itself is plattform specific. You can download the version that works for your operating system <a href="http://www.gurobi.com/downloads/gurobi-optimizer">here</a>. The documentation <a href="http://www.gurobi.com/documentation/">page</a> and platform specific Quick Start Guides should help you with the installation. Installing the software is fairly straight forward on Windows and Linux.</p>
<p>Once the installation is finished you will need to activate the Gurobi software using the licence you downloaded earlier. The Licence detail website already shows you the command you need to execute to do so, which you can do via a command/terminal Prompt. This screenshot shows the prompt output on a Windows machine:</p>
<div class="figure">
<img src="CMD%20windows%20success.PNG">
</div>
<p>Once the licence key has been successfully installed you can test if the installation worked, but running an example model included in the Gurobi installation. If we assume you installed <em>Gurobi version 7.5.1</em> in the standard location on your (Windows) system we can enter the following command in the prompt to test if the solver is working:</p>
<p><code>gurobi_cl c:\gurobi751\win64\examples\data\coins.lp</code></p>
<p>You should see output like this, if everything worked:</p>
<div class="figure">
<img src="Model%20test.PNG">
</div>
</div>
<div id="gurobi-r-package-installation-on-windows" class="section level2">
<h2 class="hasAnchor">
<a href="#gurobi-r-package-installation-on-windows" class="anchor"></a>Gurobi R package installation on Windows</h2>
<p>The R package file can be found in the <installdir>/R directory of your Gurobi installation. For a default installation of Gurobi 7.5.1, the command would be:</installdir></p>
<p><code>install.packages('c:/gurobi751/win64/R/gurobi_7.5-1.zip', repos=NULL)</code></p>
<p>Next you will need to install the <code>slam</code> package for gurobi to work:</p>
<p><code>install.packages('slam','https://cloud.r-project.org')</code></p>
<p>The next thing to try is if the R package works. To do so you can follow the <a href="http://www.gurobi.com/documentation/7.5/quickstart_windows/r_example.html">example</a> from the Gurobi website, which is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">'gurobi'</span>)</code></pre></div>
<pre><code>## Loading required package: slam</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model &lt;-<span class="st"> </span><span class="kw">list</span>()

model<span class="op">$</span>A          &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">3</span>, <span class="dt">byrow=</span>T)
model<span class="op">$</span>obj        &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>)
model<span class="op">$</span>modelsense &lt;-<span class="st"> "max"</span>
model<span class="op">$</span>rhs        &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>)
model<span class="op">$</span>sense      &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'&lt;'</span>, <span class="st">'&gt;'</span>)
model<span class="op">$</span>vtype      &lt;-<span class="st"> 'B'</span>

params &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">OutputFlag=</span><span class="dv">0</span>)

result &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/gurobi/topics/gurobi">gurobi</a></span>(model, params)

<span class="kw"><a href="../reference/print.html">print</a></span>(<span class="st">'Solution:'</span>)</code></pre></div>
<pre><code>## [1] "Solution:"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>objval)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>x)</code></pre></div>
<pre><code>## [1] 1 0 1</code></pre>
<p>If R doesn’t give you any error message you have successfully installed the Gurobi solver and can now use it with <em>prioritizr</em>.</p>
</div>
<div id="gurobi-r-package-installation-on-linux" class="section level2">
<h2 class="hasAnchor">
<a href="#gurobi-r-package-installation-on-linux" class="anchor"></a>Gurobi R package installation on Linux</h2>
<p>Before talking about the R package installation it’s important to bring up some points about the gurobi software installation on Linux, that could cause some issues for users.</p>
<p>Once you have downloaded the Gurobi optimizer from <a href="http://www.gurobi.com/downloads/gurobi-optimizer">here</a> and decided to extract Gurobi in the standard /opt directory you will have Gurobi installed here:</p>
<p><em>/opt/gurobi751</em></p>
<p>We now have to now make the Gurobi solver dicoverable. If you are isung the bash shell, add the following <em>~/.bashrc</em></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  export GUROBI_HOME=<span class="st">"/opt/gurobi650/linux64"</span>  
  export PATH=<span class="st">"${PATH}:${GUROBI_HOME}/bin"</span>  
  export LD_LIBRARY_PATH=<span class="st">"${GUROBI_HOME}/lib"</span>  </code></pre></div>
<p>Once that is done you need to logout and login again. When you have logged into your Linux system again, open a terminal and add your Gurobi license from above:</p>
<p><code>grbgetkey 2b695a2e-aac7-11e7-be25-0a4522cc772c</code></p>
<p>Now you are ready to install the Gurobi <em>R</em> package.<br>
In an R session run the folowing code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">'slam'</span>), <span class="dt">repos=</span><span class="st">'https://cran.rstudio.com/'</span>)
<span class="kw">install.packages</span>(<span class="st">'/opt/gurobi650/linux64/R/gurobi_6.5-0_R_x86_64-unknown-linux-gnu.tar.gz'</span>, <span class="dt">repos=</span><span class="ot">NULL</span>)</code></pre></div>
<p>Just as on a Windows system you can try out if Gurobi is working from R with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">'gurobi'</span>)

model &lt;-<span class="st"> </span><span class="kw">list</span>()

model<span class="op">$</span>A          &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">ncol=</span><span class="dv">3</span>, <span class="dt">byrow=</span>T)
model<span class="op">$</span>obj        &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>)
model<span class="op">$</span>modelsense &lt;-<span class="st"> "max"</span>
model<span class="op">$</span>rhs        &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>)
model<span class="op">$</span>sense      &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'&lt;'</span>, <span class="st">'&gt;'</span>)
model<span class="op">$</span>vtype      &lt;-<span class="st"> 'B'</span>

params &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">OutputFlag=</span><span class="dv">0</span>)

result &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/gurobi/topics/gurobi">gurobi</a></span>(model, params)

<span class="kw"><a href="../reference/print.html">print</a></span>(<span class="st">'Solution:'</span>)</code></pre></div>
<pre><code>## [1] "Solution:"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>objval)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>x)</code></pre></div>
<pre><code>## [1] 1 0 1</code></pre>
<p>In case you are using <a href="https://www.rstudio.com/products/rstudio/">RStudio</a> on Linux, you might need to add the following line to <em>/etc/rstudio/rserver.conf</em></p>
<p><code>rsession-ld-library-path=/opt/gurobi650/linux64/lib</code></p>
<p>If everything works, you are good to go to test prioritzr with the Gurobi solver with the example below.</p>
</div>
<div id="gurobi-installation-on-mac-os-x" class="section level2">
<h2 class="hasAnchor">
<a href="#gurobi-installation-on-mac-os-x" class="anchor"></a>Gurobi installation on Mac OS X</h2>
<p>TO DO</p>
</div>
<div id="solving-a-prioritzr-problem-with-gurobi" class="section level2">
<h2 class="hasAnchor">
<a href="#solving-a-prioritzr-problem-with-gurobi" class="anchor"></a>Solving a prioritzr problem with Gurobi</h2>
<p>If the Gurobi software and <em>R</em> package installation on your system was successful you can test if the gurobi solver is working with the following addition to a <em>prioritzr</em> problem forumlation:</p>
<p><a href="https://prioritizr.github.io/prioritizr/reference/add_gurobi_solver.html">add_gurobi_solver()</a></p>
<p>Below is an exmple you can use to test if everything is working with both <em>prioritzr</em> and the <em>gurobi</em> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(prioritizr)

<span class="co"># formulate the problem</span>
p &lt;-<span class="st"> </span><span class="kw">problem</span>(sim_pu_raster, sim_features) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">add_min_set_objective</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">add_relative_targets</span>(<span class="fl">0.1</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">add_gurobi_solver</span>()

<span class="co"># solve the problem</span>
s &lt;-<span class="st"> </span><span class="kw">solve</span>(p)

<span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">"grey90"</span>, <span class="st">"darkgreen"</span>), <span class="dt">main =</span> <span class="st">"Solution"</span>,
     <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="Gurobi_installation_files/figure-html/unnamed-chunk-7-1.png" width="336" style="display: block; margin: auto;"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#the-gurobi-solver">The Gurobi solver</a><ul class="nav nav-pills nav-stacked">
<li><a href="#gurobi-requires-a-license-to-work">Gurobi requires a license to work</a></li>
      <li><a href="#gurobi-optimizer-software-installation">Gurobi optimizer software installation</a></li>
      <li><a href="#gurobi-r-package-installation-on-windows">Gurobi R package installation on Windows</a></li>
      <li><a href="#gurobi-r-package-installation-on-linux">Gurobi R package installation on Linux</a></li>
      <li><a href="#gurobi-installation-on-mac-os-x">Gurobi installation on Mac OS X</a></li>
      <li><a href="#solving-a-prioritzr-problem-with-gurobi">Solving a prioritzr problem with Gurobi</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://jeffrey-hanson.com">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com/">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com">Matthew Strimas-Mackey</a>, Matthew E Watts, <a href="http://arcese.forestry.ubc.ca">Peter Arcese</a>, <a href="https://josephrbennett.wordpress.com/">Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
