<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gurobi Installation Guide • prioritizr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Gurobi Installation Guide</h1>
                        <h4 class="author">Richard Schuster</h4>
            
            <h4 class="date">2017-11-06</h4>
          </div>

    
    
<div class="contents">
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Gurobi is the most powerful and fastest solver that <em>prioritizr</em> can use to solve conservation planning problems. This vignette will walk you through the process of setting up Gurobi on your computer. If you encounter any problems while following the instructions below, check out the <a href="http://www.gurobi.com/documentation/">official Gurobi documentation</a> or the <a href="https://groups.google.com/forum/#!forum/gurobi">official Gurobi emailing list</a> for more information.</p>
</div>
<div id="obtaining-a-license" class="section level2">
<h2 class="hasAnchor">
<a href="#obtaining-a-license" class="anchor"></a>Obtaining a license</h2>
<p>One of the potential caveats associated with using Gurobi that you will need to obtain a <a href="http://www.gurobi.com/products/licensing-pricing/licensing-overview">license</a>. If you are an academic that is affiliated with an educational institution, you can take advantage of the <a href="https://user.gurobi.com/download/licenses/free-academic">special academic license</a> to use Gurobi for no cost. Once you have signed up for a free account you can request a <a href="https://www.gurobi.com/registration/academic-license-reg">free academic license</a>.</p>
<br><center>
<img src="figures/free-academic-license-page.png" style="width:75.0%">
</center>
<p><br></p>
<p>Once you accept the terms of service you can generate a license.</p>
<br><center>
<img src="figures/actual-license.png" style="width:75.0%">
</center>
<p><br></p>
<p>Now, copy and save the <code>grbgetkey XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</code> command for later use.</p>
</div>
<div id="software-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#software-installation" class="anchor"></a>Software installation</h2>
<p>The Gurobi software installation itself is platform specific. You will need to <a href="http://www.gurobi.com/downloads/gurobi-optimizer">download the version that works for your operating system</a>. The <a href="http://www.gurobi.com/documentation/">documentation page</a> and platform specific “Quick Start Guides” should help you with the installation. <a href="http://www.gurobi.com/documentation/7.5/quickstart_windows/software_installation_guid.html#section:Installation">On Windows, simply download the installer and follow the prompts.</a> <a href="http://www.gurobi.com/documentation/7.5/quickstart_linux/software_installation_guid.html">On Linux, you will need to download an archive containing Gurobi, extract its contents, move them them to a suitable location, and update your system’s variables.</a>.</p>
<p>Additionally, if you are using <a href="https://www.rstudio.com/products/rstudio/">RStudio</a> on a Linux system, you might need to add the following line to the file <em>/etc/rstudio/rserver.conf</em>:</p>
<pre><code>rsession-ld-library-path=/opt/gurobi650/linux64/lib</code></pre>
<p>After installing the Gurobi software suite on your computer, you will need to activate your license.</p>
</div>
<div id="license-activation" class="section level2">
<h2 class="hasAnchor">
<a href="#license-activation" class="anchor"></a>License activation</h2>
<p>Now we will activate the Gurobi software using the license you downloaded earlier. To achieve this, simply copy and paste the <code>grbgetkey</code> command into your computer’s command prompt or terminal. After running the <code>grbgetkey</code> command with the correct license code, you should see output that looks like the screen shot below.</p>
<br><center>
<img src="figures/cmd-windows-success.png" style="width:75.0%">
</center>
<p><br></p>
<p>We can double check that the license has been successfully activated by running Gurobi from the command line. Assuming you have installed Gurobi version 7.5.1, Windows users can type in the following the following commands:</p>
<pre><code>gurobi_cl c:\gurobi751\win64\examples\data\coins.lp</code></pre>
<p>Additionally, Linux users can test their license activation using the following commands</p>
<pre><code>gurobi_cl /opt/gurobi751/linux64/examples/data/coins.lp</code></pre>
<p>If the license was successfully activated, you should seen an output that looks like the screen shot below.</p>
<br><center>
<img src="figures/model-test.png" style="width:75.0%">
</center>
<p><br></p>
<p>After activating the license, you now need to install the Gurobi <em>R</em> package named <em>gurobi</em>.</p>
</div>
<div id="r-package-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#r-package-installation" class="anchor"></a><em>R</em> package installation</h2>
<p>We need to install the Gurobi <em>R</em> package named <em>gurobi</em> to use Gurobi from within <em>R</em>. The <em>gurobi</em> <em>R</em> package installation file can be found within the folder where you installed Gurobi. Assuming you installed Gurobi in the default location, Windows users can install <em>gurobi</em> <em>R</em> package by running the following code from within <em>R</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"c:/gurobi751/win64/R/gurobi_7.5-1.zip"</span>, <span class="dt">repos =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>Additionally, Linux users can install the <em>gurobi</em> <em>R</em> package by running the following code from within R:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">file.path</span>(<span class="kw">Sys.getenv</span>(<span class="st">"GUROBI_HOME"</span>), <span class="st">"R/gurobi_7.5-1.zip"</span>),
                 <span class="dt">repos =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>Next, you will need to install the <em>slam</em> package because the <em>gurobi</em> <em>R</em> package needs this package to work. Both Windows and Linux users can do this by running the code below in <em>R</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"slam"</span>, <span class="dt">repos =</span> <span class="st">"https://cloud.r-project.org"</span>)</code></pre></div>
<p>Let’s check that the <em>gurobi</em> <em>R</em> package is installed correctly. To do this, you can try using Gurobi to solve an optimization problem using the <em>R</em> code below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load gurobi package</span>
<span class="kw">library</span>(gurobi)</code></pre></div>
<pre><code>## Loading required package: slam</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create optimization problem</span>
model &lt;-<span class="st"> </span><span class="kw">list</span>()
model<span class="op">$</span>obj        &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>)
model<span class="op">$</span>modelsense &lt;-<span class="st"> "max"</span>
model<span class="op">$</span>rhs        &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">1</span>)
model<span class="op">$</span>sense      &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"&lt;"</span>, <span class="st">"&gt;"</span>)
model<span class="op">$</span>vtype      &lt;-<span class="st"> "B"</span>
model<span class="op">$</span>A          &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>,
                           <span class="dt">byrow =</span> <span class="ot">TRUE</span>)

<span class="co"># solve the optimization problem using Gurobi</span>
result &lt;-<span class="st"> </span><span class="kw">gurobi</span>(model, <span class="kw">list</span>())</code></pre></div>
<pre><code>## Warning for adding variables: zero or small (&lt; 1e-13) coefficients, ignored
## Optimize a model with 2 rows, 3 columns and 5 nonzeros
## Variable types: 0 continuous, 3 integer (3 binary)
## Coefficient statistics:
##   Matrix range     [1e+00, 3e+00]
##   Objective range  [1e+00, 2e+00]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [1e+00, 4e+00]
## Found heuristic solution: objective 2
## Presolve removed 2 rows and 3 columns
## Presolve time: 0.00s
## Presolve: All rows and columns removed
## 
## Explored 0 nodes (0 simplex iterations) in 0.00 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 2: 3 2 
## 
## Optimal solution found (tolerance 1.00e-04)
## Best objective 3.000000000000e+00, best bound 3.000000000000e+00, gap 0.0000%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print the solution</span>
<span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>objval) <span class="co"># objective</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print.html">print</a></span>(result<span class="op">$</span>x)      <span class="co"># decision variables</span></code></pre></div>
<pre><code>## [1] 1 0 1</code></pre>
<p>If you don’t see any error messages, then you have successfully installed Gurobi and can now use it with <em>prioritizr</em>. If do see an error message, then you probably missed a step while installing the package or activating the license.</p>
</div>
<div id="solving-a-prioritzr-problem-with-gurobi" class="section level2">
<h2 class="hasAnchor">
<a href="#solving-a-prioritzr-problem-with-gurobi" class="anchor"></a>Solving a <em>prioritzr</em> problem with Gurobi</h2>
<p>If you successfully installed Gurobi software and the <em>gurobi</em> <em>R</em> package, you can now try using Gurobi to solve reserve selection problems using the <em>prioritzr</em> <em>R</em> package. Although the <em>prioritizr</em> <em>R</em> package should automatically detect that Gurobi has been installed, you can use the function <a href="https://prioritizr.github.io/prioritizr/reference/add_gurobi_solver.html"><code>add_gurobi_solver</code></a> to customize the optimization process.</p>
<p>Finally, to check that everything has been installed correctly, we will use Gurobi to solve a reserve selection problem created using the <em>prioritzr</em> <em>R</em> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(prioritizr)

<span class="co"># formulate the problem</span>
p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/problem.html">problem</a></span>(sim_pu_raster, sim_features) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw"><a href="../reference/add_min_set_objective.html">add_min_set_objective</a></span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw"><a href="../reference/add_relative_targets.html">add_relative_targets</a></span>(<span class="fl">0.1</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw"><a href="../reference/add_gurobi_solver.html">add_gurobi_solver</a></span>()

<span class="co"># solve the problem</span>
s &lt;-<span class="st"> </span><span class="kw"><a href="../reference/solve.html">solve</a></span>(p)</code></pre></div>
<pre><code>## Optimize a model with 5 rows, 90 columns and 450 nonzeros
## Variable types: 0 continuous, 90 integer (90 binary)
## Coefficient statistics:
##   Matrix range     [2e-01, 9e-01]
##   Objective range  [2e+02, 2e+02]
##   Bounds range     [1e+00, 1e+00]
##   RHS range        [3e+00, 7e+00]
## Found heuristic solution: objective 2145.27
## Presolve time: 0.00s
## Presolved: 5 rows, 90 columns, 450 nonzeros
## Variable types: 0 continuous, 90 integer (90 binary)
## Presolved: 5 rows, 90 columns, 450 nonzeros
## 
## 
## Root relaxation: objective 1.726522e+03, 11 iterations, 0.00 seconds
## 
##     Nodes    |    Current Node    |     Objective Bounds      |     Work
##  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
## 
##      0     0 1726.52215    0    4 2145.26789 1726.52215  19.5%     -    0s
## H    0     0                    1792.7738341 1726.52215  3.70%     -    0s
## 
## Explored 1 nodes (11 simplex iterations) in 0.00 seconds
## Thread count was 1 (of 4 available processors)
## 
## Solution count 2: 1792.77 2145.27 
## 
## Optimal solution found (tolerance 1.00e-01)
## Best objective 1.792773834063e+03, best bound 1.726522151579e+03, gap 3.6955%</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot solution</span>
<span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">"grey90"</span>, <span class="st">"darkgreen"</span>), <span class="dt">main =</span> <span class="st">"Solution"</span>,
     <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>, <span class="fl">1.1</span>))</code></pre></div>
<p><img src="gurobi_installation_files/figure-html/unnamed-chunk-7-1.png" width="336" style="display: block; margin: auto;"></p>
<p>If you have managed run the code on your system without encountering any errors, then you have correctly installed Gurobi and can begin using it to solve your very own conservation planning problems.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#obtaining-a-license">Obtaining a license</a></li>
      <li><a href="#software-installation">Software installation</a></li>
      <li><a href="#license-activation">License activation</a></li>
      <li><a href="#r-package-installation"><em>R</em> package installation</a></li>
      <li><a href="#solving-a-prioritzr-problem-with-gurobi">Solving a <em>prioritzr</em> problem with Gurobi</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://jeffrey-hanson.com">Jeffrey O Hanson</a>, <a href="http://www.richard-schuster.com/">Richard Schuster</a>, Nina Morrell, <a href="http://strimas.com">Matthew Strimas-Mackey</a>, Matthew E Watts, <a href="http://arcese.forestry.ubc.ca">Peter Arcese</a>, <a href="https://josephrbennett.wordpress.com/">Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
