<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add corridor constraints <U+2014> add_corridor_constraints <e2><80><a2> prioritizr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">prioritizr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add corridor constraints</h1>
    </div>

    
    <p>It is important to maintain connectivity throughout a reserve network.
However, some areas are more difficult for species to traverse then other
areas. As a consequence, even though a reserve may protect a contiguous
section of land, some species may not be able to disperse throughout
the network if some of the land is a high barrier to dispersal. This
function adds constraints to ensure that all planning units used to
represent features in the conservation problem are connected by planning
units that have high connectivity.</p>
    

    <pre class="usage"><span class='fu'>add_corridor_constraints</span>(<span class='no'>x</span>, <span class='no'>connectivities</span>, <span class='no'>thresholds</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p></td>
    </tr>
    <tr>
      <th>connectivities</th>
      <td><p><code>object</code> used to calculate the the connectivity
between planning units. See the Details section for more information.</p></td>
    </tr>
    <tr>
      <th>thresholds</th>
      <td><p><code>numeric</code> value representing the minimum
connectivity required between planning units for them to be
considered connected for a given feature. Threshold values
are expressed as a proportion of the total range of connectivity
observed among all planning units for each feature. If a higher
threshold is used, then planning units with lower conductances,
and in turn, lower connectivity will not be considered
to have strong enough connectivity to form corridors to link
planning units. If <code>thresholds</code> is a single number then it is used
as the threshold for each feature. Otherwise, if <code>threshold</code> is a
<code>vector</code> then it specifies the threshold for each feature.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments passed to <code><a href='fast_extract.html'>fast_extract</a></code> if
the planning units in argument to <code>x</code> inherit from a
<code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>RasterStack-class</a></code> object.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function adds constraints to a conservation planning problem to ensure
  that all planning units used to represent a given feature are connected to
  each other. To achieve this, each planning unit is associated with
  conductance values that describe the ease at which individuals from
  each feature can disperse through it. Higher conductance values indicate
  that individuals can move planning units with greater ease. The
  connectivity between two planning units is calculated as the average
  conductance of the two planning units. After the connectivity values have
  been calculated, the threshold is applied to determine which planning
  units are "connected enough" to be used for linking planning units
  occupied by conspecifics. <strong>Adding these constraints to a problem
  will dramatically increase the amount of time required to solve it.</strong></p>
<p>The argument to <code>y</code> can be used to specify the
  the connectivity between different planning units in several different
  ways:</p><dl class='dl-horizontal'>
   <dt><code>character</code> <code>vector</code></dt><dd><p>If the planning units in
     argument to <code>x</code> inherit from a <code><a href='http://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code>
     object then the argument to codey can refer to the
     names of the columns in the attribute table that contain the
     conductance values for each planning unit for each feature.
     It is assumed that the order of the column names in argument to
     <code>y</code> matches the order of the features in the
     argument to <code>x</code>.</p></dd>
    <dt><code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>RasterStack-class</a></code> object</dt><dd><p>Each band
     corresponds
     to each feature in the argument to <code>x</code>. The cells in each band
     denote the conductance of an area. For a given feature, the
     conductance of each planning unit is calculated by overlaying the
     planning units in argument to codex with the raster data in
     argument to <code>conductance</code>. Note that
     if the planning units in argument to <code>x</code> inherit from a
     <code><a href='http://www.rdocumentation.org/packages/raster/topics/Raster-classes'>Raster-class</a></code> object, then the argument to
     codeconductance must have the same spatial properties as the
     planning units (i.e. coordinate system, extent, resolution).</p></dd>
    <dt><code>list</code> of <code><a href='http://www.rdocumentation.org/packages/Matrix/topics/dsCMatrix-class'>dsCMatrix-class</a></code> matrices</dt><dd><p>Each element in the list corresponds to a different feature. Each
     row and column refers to a different planning unit, and the cell
     values denote the connectivity between the two planning units. Note
     that the connectivity between planning units is assumed to be
     symmetric.</p></dd>
 </dl>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='constraints.html'>constraints</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load data</span>
<span class='fu'>data</span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>)

<span class='co'># create a basic problem</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span>() <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.1</span>)

<span class='co'># create problem with added corridor constraints to ensure that</span>
<span class='co'># planning units used to represent features are connected by</span>
<span class='co'># planning units with habitat that is suitable for that feature</span>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>p1</span> <span class='kw'>%&gt;%</span> <span class='fu'>add_corridor_constraints</span>(<span class='no'>sim_features</span>, <span class='fl'>0.5</span>)

<span class='co'># solve problems</span>
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'>stack</span>(<span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>), <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p2</span>))</div><div class='output co'>#&gt; Optimize a model with 5 rows, 90 columns and 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 9e-01]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [3e+00, 7e+00]
#&gt; Found heuristic solution: objective 2145.2678910
#&gt; Presolve time: 0.00s
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; Variable types: 0 continuous, 90 integer (90 binary)
#&gt; Presolved: 5 rows, 90 columns, 450 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 1.726522e+03, 11 iterations, 0.00 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 1726.52215    0    4 2145.26789 1726.52215  19.5%     -    0s
#&gt; H    0     0                    1792.7738341 1726.52215  3.70%     -    0s
#&gt; 
#&gt; Explored 1 nodes (11 simplex iterations) in 0.00 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 2: 1792.77 2145.27 
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 1.792773834063e+03, best bound 1.726522151579e+03, gap 3.6955%
#&gt; Optimize a model with 1172 rows, 982 columns and 3838 nonzeros
#&gt; Variable types: 0 continuous, 982 integer (982 binary)
#&gt; Coefficient statistics:
#&gt;   Matrix range     [2e-01, 1e+00]
#&gt;   Objective range  [2e+02, 2e+02]
#&gt;   Bounds range     [1e+00, 1e+00]
#&gt;   RHS range        [1e+00, 7e+00]
#&gt; Presolve time: 0.01s
#&gt; Presolved: 1172 rows, 982 columns, 3838 nonzeros
#&gt; Variable types: 0 continuous, 982 integer (982 binary)
#&gt; Presolved: 1172 rows, 982 columns, 3838 nonzeros
#&gt; 
#&gt; 
#&gt; Root relaxation: objective 2.048985e+03, 1616 iterations, 0.04 seconds
#&gt; 
#&gt;     Nodes    |    Current Node    |     Objective Bounds      |     Work
#&gt;  Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time
#&gt; 
#&gt;      0     0 2048.98539    0  348          - 2048.98539      -     -    0s
#&gt;      0     0 2100.00339    0  492          - 2100.00339      -     -    0s
#&gt;      0     0 2110.10012    0  555          - 2110.10012      -     -    0s
#&gt;      0     0 2130.68116    0  535          - 2130.68116      -     -    0s
#&gt;      0     0 2130.68116    0  535          - 2130.68116      -     -    0s
#&gt;      0     0 2130.87718    0  506          - 2130.87718      -     -    0s
#&gt;      0     0 2130.87718    0  496          - 2130.87718      -     -    0s
#&gt; H    0     0                    8158.3201044 2130.87718  73.9%     -    0s
#&gt; H    0     0                    6737.8560804 2130.87718  68.4%     -    0s
#&gt;      0     2 2131.16749    0  496 6737.85608 2131.16749  68.4%     -    0s
#&gt; H   27    23                    5098.3135421 2132.86136  58.2%   204    0s
#&gt; H   31    21                    3482.6523853 2132.86136  38.8%   178    0s
#&gt; H  108    71                    3329.8805201 2136.99128  35.8%   122    1s
#&gt; H  135    86                    3327.0749573 2137.74141  35.7%   112    1s
#&gt; H  211    39                    2717.9860002 2142.79074  21.2%  98.2    1s
#&gt; H  244    39                    2717.6337903 2151.63572  20.8%  93.9    1s
#&gt; H  271    50                    2700.2331924 2159.71106  20.0%  96.9    1s
#&gt; H  442   107                    2696.5045671 2213.04524  17.9%  89.4    2s
#&gt; H  612   138                    2682.5397318 2300.17537  14.3%  81.3    3s
#&gt;   1023   258 2516.79002   11  348 2682.53973 2356.51185  12.2%  68.5    5s
#&gt; H 1052   252                    2680.8577398 2356.51185  12.1%  73.0    7s
#&gt;   1910   340     cutoff   38      2680.85774 2398.49274  10.5%  60.2   10s
#&gt; 
#&gt; Explored 2186 nodes (125875 simplex iterations) in 10.42 seconds
#&gt; Thread count was 1 (of 4 available processors)
#&gt; 
#&gt; Solution count 10: 2680.86 2682.54 2696.5 ... 5098.31
#&gt; 
#&gt; Optimal solution found (tolerance 1.00e-01)
#&gt; Best objective 2.680857739841e+03, best bound 2.413293434171e+03, gap 9.9805%</div><div class='input'>
<span class='co'># plot solutions</span>
<span class='fu'>plot</span>(<span class='no'>s</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"basic solution"</span>, <span class='st'>"solution with corridors"</span>), <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
     <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><img src='add_corridor_constraints-4.png' alt='' width='540' height='400' /><div class='input'>


</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com/'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='http://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com/'>Joeseph Bennett</a>, Hugh P Possingham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
